-- BP 7.1 content: ModelClass syschar: 3 persistence-version: 7.1.5

INSERT INTO O_OBJ
	VALUES ("e815aa95-e0d5-441a-b449-1b7099c06280",
	'AccommodationHandler',
	18,
	'AccommodationHandler',
	'',
	"039b251e-463b-4e95-ba19-5c91e87add53");
INSERT INTO O_TFR
	VALUES ("b77fdde0-7105-40e3-9109-6a1a5eea0032",
	"e815aa95-e0d5-441a-b449-1b7099c06280",
	'getNumberOfAccommodations',
	'',
	"fce637ce-efce-4558-a806-dabefe9b0a9d",
	1,
	'',
	1,
	'',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TPARM
	VALUES ("e88efba1-e2cc-47cb-81f7-70ee77b87f76",
	"b77fdde0-7105-40e3-9109-6a1a5eea0032",
	'type',
	"d649ab46-edb7-416c-b293-6b495adb66bd",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO S_DT_PROXY
	VALUES ("d649ab46-edb7-416c-b293-6b495adb66bd",
	"00000000-0000-0000-0000-000000000000",
	'unique_id',
	'',
	'',
	'../../../../Datatypes/Datatypes.xtuml');
INSERT INTO S_DT_PROXY
	VALUES ("fce637ce-efce-4558-a806-dabefe9b0a9d",
	"00000000-0000-0000-0000-000000000000",
	'integer',
	'',
	'',
	'../../../../Datatypes/Datatypes.xtuml');
INSERT INTO O_TFR
	VALUES ("6fc7687a-60e6-40a7-b26a-893b28e25ac5",
	"e815aa95-e0d5-441a-b449-1b7099c06280",
	'initDummyData',
	'',
	"3eef3a3b-426d-40c5-97d2-aff4ca61e7a7",
	1,
	'/*
	__Create types__
	
	There will exist types with the same amount of beds but different prices.
	Not all continous integral amounts of beds will be represented, No rooms with 3 beds for example
	
	Single room
		price 100
		beds 1
		id 1
	
	Double room
		price 180
		beds 2
		id 2
	
	Junior suite
		price 250
		beds 2
		id 3
	
	Family suite
		price 500
		beds 4
		id 4
	
	Dormitory
		price 70
		beds 1
		id 5
*/

create object instance t1 of Type;
t1.name = "Single room";
t1.beds = 1;
t1.price = 100;
t1.id = 1;
relate t1 to self across RX;',
	1,
	'',
	"b77fdde0-7105-40e3-9109-6a1a5eea0032");
INSERT INTO S_DT_PROXY
	VALUES ("3eef3a3b-426d-40c5-97d2-aff4ca61e7a7",
	"00000000-0000-0000-0000-000000000000",
	'void',
	'',
	'',
	'../../../../Datatypes/Datatypes.xtuml');
INSERT INTO O_TFR
	VALUES ("82404b0d-e584-4542-a661-a5f3ce678e27",
	"e815aa95-e0d5-441a-b449-1b7099c06280",
	'getFreeAccomId',
	'',
	"fce637ce-efce-4558-a806-dabefe9b0a9d",
	1,
	'
select any type related by self -> Type[R23] where selected.id == param.typeId;

if(not empty type)
	select many accoms related by type -> Accommodation[R34];
	
	if(not empty accoms)
		for each accom in accoms
			select one b related by accom -> Booking[R33];
			if(empty b)
				return accom.id;
			end if;
		end for;
		return -1;
	else
		return -1;
	end if;
else
	return -1;
end if;',
	1,
	'',
	"6fc7687a-60e6-40a7-b26a-893b28e25ac5");
INSERT INTO O_TPARM
	VALUES ("f1e935eb-4c41-42bb-87a5-50b6c52d7f84",
	"82404b0d-e584-4542-a661-a5f3ce678e27",
	'typeId',
	"fce637ce-efce-4558-a806-dabefe9b0a9d",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_ID
	VALUES (0,
	"e815aa95-e0d5-441a-b449-1b7099c06280");
INSERT INTO O_ID
	VALUES (1,
	"e815aa95-e0d5-441a-b449-1b7099c06280");
INSERT INTO O_ID
	VALUES (2,
	"e815aa95-e0d5-441a-b449-1b7099c06280");
INSERT INTO S_SS_PROXY
	VALUES ("039b251e-463b-4e95-ba19-5c91e87add53",
	'BookingSystem',
	'',
	'',
	0,
	"c0eb1a5b-457e-4353-a295-25de28f467f1",
	"00000000-0000-0000-0000-000000000000",
	'../BookingSystem.xtuml');
